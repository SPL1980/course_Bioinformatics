<!DOCTYPE HTML>


    












<html>
    <!--base_panels.mako-->
    

    
    <head>
            <title>
    Galaxy | 
Published Page | 
    Galaxy 101: The first thing you need to try
</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name = "viewport" content = "maximum-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
        
    
    
    <link href="/static/style/base.css?v=1377279265" media="screen" rel="Stylesheet" type="text/css" />
<link href="/static/style/jquery.rating.css?v=1377279265" media="screen" rel="Stylesheet" type="text/css" />
    <style type="text/css">
    #center {
            left: 0 !important;
    }
    </style>

    <link href="/static/style/autocomplete_tagging.css?v=1377279265" media="screen" rel="Stylesheet" type="text/css" />
<link href="/static/style/embed_item.css?v=1377279265" media="screen" rel="Stylesheet" type="text/css" />
<link href="/static/style/jquery.rating.css?v=1377279265" media="screen" rel="Stylesheet" type="text/css" />
    
    <link href="/static/style/history.css?v=1377279265" media="screen" rel="Stylesheet" type="text/css" />
<link href="/static/style/autocomplete_tagging.css?v=1377279265" media="screen" rel="Stylesheet" type="text/css" />
<link href="/static/style/trackster.css?v=1377279265" media="screen" rel="Stylesheet" type="text/css" />
<link href="/static/style/library.css?v=1377279265" media="screen" rel="Stylesheet" type="text/css" />
<link href="/static/style/jquery-ui/smoothness/jquery-ui.css?v=1377279265" media="screen" rel="Stylesheet" type="text/css" />

    
    <style type="text/css">
        .page-body {
            padding: 10px;
        }
        .page-meta {
            float: right;
            width: 27%;
            padding: 0.5em;
            margin: 0.25em;
            vertical-align: text-top;
            border: 2px solid #DDDDDD;
            border-top: 4px solid #DDDDDD;
        }
        
        .historyItemContainer, .toolForm {
            max-width: 500px;
        }
        
        div.toolForm{
            margin-top: 10px;
            margin-bottom: 10px;
        }
        
        .historyItemContainer {
            padding-right: 3px;
            border-right-style: solid;
            border-right-color: #66AA66;
        }
    </style>

    <link href="/static/style/base.css?v=1377279265" media="screen" rel="Stylesheet" type="text/css" />
<link href="/static/style/history.css?v=1377279265" media="screen" rel="Stylesheet" type="text/css" />
<link href="/static/style/autocomplete_tagging.css?v=1377279265" media="screen" rel="Stylesheet" type="text/css" />
    <style type="text/css">
        .toggle { display: none; }
        .embedded-item h4 {
            margin: 0px;
        }
        .page-body > table {
            padding: 8px 5px 5px;
            min-width: 500px; 
            border: none;
            margin-top: 1em;
            margin-bottom: 1em;
        }
        .page-body caption { 
            text-align: left;
            background: #E4E4B0; 
            padding: 5px; 
            font-weight: bold; 
        }
        .page-body > table td {
            width: 25%;
            padding: 0.2em 0.8em;
        }
        .embedded-item .trackster-nav-container {
            height: inherit;
        }
        .embedded-item .trackster-nav {
            position: inherit;
        }
    </style>

        
    
    
    

        <script src="/static/scripts/libs/tracekit.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/raven.js?v=1377279265" type="text/javascript"></script>
        <script>
            Raven.config('https://0bce287227d54570b2679293be06719a@sentry.p.galaxyproject.org/3').install();
                Raven.setUser( { email: "xfyin@sibs.ac.cn" } );
        </script>

    <script src="/static/scripts/libs/jquery/jquery.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/jquery/jquery.migrate.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/json2.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/jquery/select2.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/bootstrap.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/underscore.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/backbone/backbone.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/backbone/backbone-relational.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/handlebars.runtime.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/galaxy.base.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/require.js?v=1377279265" type="text/javascript"></script>

    <script src="/static/scripts/templates/compiled/template-popupmenu-menu.js?v=1377279265" type="text/javascript"></script>

    <script src="/static/scripts/mvc/ui.js?v=1377279265" type="text/javascript"></script>

    <script type="text/javascript">
        var galaxy_config = {
            url: {
                styles : "/static/style"
            }
        };

        function is_in_galaxy_frame()
        {
            var iframes = parent.document.getElementsByTagName("iframe");
            for (var i=0, len=iframes.length; i < len; ++i)
                if (document == iframes[i].contentDocument || self == iframes[i].contentWindow)
                    return $(iframes[i]).hasClass('f-iframe');
            return false;
        };

        function load_css (url)
        {
            if (!$('link[href="' + url + '"]').length)
                $('<link href="' + url + '" rel="stylesheet">').appendTo('head');
        };

        if (is_in_galaxy_frame())
            load_css(galaxy_config.url.styles + '/galaxy.frame.masthead.css');
        
        // console protection
        window.console = window.console || {
            log     : function(){},
            debug   : function(){},
            info    : function(){},
            warn    : function(){},
            error   : function(){},
            assert  : function(){}
        };

        // Set up needed paths.
        var galaxy_paths = new GalaxyPaths({
            root_path: '/',
            image_path: '/static/images',
            
            tool_url: '/api/tools',
            history_url: '/api/histories',
            
            datasets_url: '/api/datasets',
            sweepster_url: '/visualization/sweepster',
            visualization_url: '/visualization/save',
        });

        require.config({
            baseUrl: "/static/scripts",
            shim: {
                "libs/underscore": { exports: "_" },
                "libs/backbone/backbone": { exports: "Backbone" },
                "libs/backbone/backbone-relational": ["libs/backbone/backbone"]
            }
        });
        
        var frame_manager = null;
        require(['galaxy.frame'], function(frame) { this.frame_manager = new frame.GalaxyFrameManager(galaxy_config); });
    </script>


    <script src="/static/scripts/libs/jquery/jstorage.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/jquery/jquery.autocomplete.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/jquery/jquery.rating.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/galaxy.autocom_tagging.js?v=1377279265" type="text/javascript"></script>
    
    <script src="/static/scripts/galaxy.panels.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/jquery/jstorage.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/jquery/jquery.event.drag.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/jquery/jquery.event.hover.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/jquery/jquery.mousewheel.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/jquery/jquery-ui.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/jquery/jquery-ui-combobox.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/require.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/farbtastic.js?v=1377279265" type="text/javascript"></script>


    <script type="text/javascript">
        
        // Handle click on community tag.
        function community_tag_click(tag_name, tag_value) {
            
    
            var href = '/page/list_published';
            href = href + "?f-tags=" + tag_name;
            if (tag_value != undefined && tag_value != "") {
                href = href + ":" + tag_value;
            }
            self.location = href;
        }
        
        // Map item rating to number of stars to show.
        function map_rating_to_num_stars(rating) {
            if (rating <= 0)
                return 0;
            else if (rating > 0 && rating <= 1.5)
                return 1;
            else if (rating > 1.5 && rating <= 2.5)
                return 2;
            else if (rating > 2.5 && rating <= 3.5)
                return 3;
            else if (rating > 3.5 && rating <= 4.5)
                return 4;
            else if (rating > 4.5)
                return 5;
        }
        
        // Init. on document load.
        $(function() {
            // Set links to Galaxy screencasts to open in overlay.
            $(this).find("a[href^='http://screencast.g2.bx.psu.edu/']").each( function() {
                $(this).click( function() {
                    var href = $(this).attr('href');
                    show_in_overlay(
                        {
                            url: href,        
                            width: 640,
                            height: 480,
                            scroll: 'no'  
                        }
                    );
                    return false;
                });
            });
            
            // Init history boxes.
            init_history_items( $("div.historyItemWrapper"), false, "nochanges" );
            
            // Init user item rating.
            $('.user_rating_star').rating({
                callback: function(rating, link) {
                    $.ajax({
                        type: "GET",
                        url: "/page/rate_async",
                        data: { id : "924b1a46d03eaf1e", rating : rating },
                        dataType: 'json',
                        error: function() { alert( "Rating submission failed" ); },
                        success: function( community_data ) {
                            $('#rating_feedback').show();
                            $('#num_ratings').text(Math.round(community_data[1]*10)/10);
                            $('#ave_rating').text(community_data[0]);
                            $('.community_rating_star').rating('readOnly', false);
                            $('.community_rating_star').rating('select', map_rating_to_num_stars(community_data[0])-1);
                            $('.community_rating_star').rating('readOnly', true);
                        }
                    });
                },
                required: true // Hide cancel button.
            });
        });    
    </script>

    <script type="text/javascript">
    
        $(function() {

            // Setup embedded content:
            //  (a) toggles for showing/hiding embedded content;
            //  (b) ...
            $('.embedded-item').each( function() {
                var container = $(this);
            
                // Show embedded item.
                var show_embedded_item = function() {
                    var ajax_url = container.find("input[type=hidden]").val();
                    // Only get item content if it's not already there.
                    var item_content = $.trim(container.find(".item-content").text());
                    if (!item_content) {
                        $.ajax({
                            type: "GET",
                            url: ajax_url,
                            error: function() { alert("Getting item content failed."); },
                            success: function( item_content ) {
                                container.find(".summary-content").hide("fast");
                                container.find(".item-content").html(item_content);
                                container.find(".expanded-content").show("fast");
                                container.find(".toggle-expand").hide();
                                container.find(".toggle").show();

                                // Init needed for history items.
                                init_history_items( container.find("div.historyItemWrapper"), "noinit", "nochanges" ); 
                                container.find( "div.historyItemBody:visible" ).each( function() {
                                    if ( $.browser.mozilla ) {
                                        $(this).find( "pre.peek" ).css( "overflow", "hidden" );
                                    }
                                    $(this).hide();
                                });
                                make_popup_menus();
                            }
                        });
                    } else {
                        container.find(".summary-content").hide("fast");
                        container.find(".expanded-content").show("fast");
                        container.find(".toggle-expand").hide();
                        container.find(".toggle").show();
                    }
                };
            
                // Hide embedded item.
                var hide_embedded_item = function() {
                    container.find(".expanded-content").hide("fast");
                    container.find(".summary-content").show("fast");
                    container.find(".toggle").hide();
                    container.find(".toggle-expand").show();
                };
            
                // Setup toggle expand.
                var toggle_expand = $(this).find('.toggle-expand');
                toggle_expand.click( function() {
                    show_embedded_item();
                    return false;
                });
            
                // Setup toggle contract.
                var toggle_contract = $(this).find('.toggle');
                toggle_contract.click( function() {
                    hide_embedded_item();
                    return false;
                });
            
                // Setup toggle embed.
                var toggle_embed = $(this).find('.toggle-embed');
                toggle_embed.click( function() {
                    if (container.find(".expanded-content").is(":visible")) {
                        hide_embedded_item();
                    } else {
                        show_embedded_item();
                    }
                    return false;
                });
            });
        });
    
    </script>

    </head>
    
    <body scroll="no" class="full-content ">
        <div id="everything" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
            <div id="background"></div>
            <div id="masthead" class="navbar navbar-fixed-top">
                <div class="masthead-inner navbar-inner">
                    

    <div style="position: relative; right: -50%; float: left;">
    <div style="display: block; position: relative; right: 50%;">

    <ul class="nav" border="0" cellspacing="0">
    
    

    
    
        
        <li class="" style="">
                <a class="" data-toggle="dropdown" target="_parent" href="/root">分析数据</a>
        </li>
    
    
    
    
        
        <li class="" style="">
                <a class="" data-toggle="dropdown" target="_parent" href="javascript:frame_manager.frame_new({title: 'Workflow', type: 'url', content: '/workflow'});">工作流</a>
        </li>
    

    
    
        
        <li class=" active dropdown" style="">
                <a class=" dropdown-toggle" data-toggle="dropdown" target="_parent" href="/library">共享的数据<b class='caret'></b></a>
                <ul class="dropdown-menu">
                            <li>
                                
                                <a href="/library">数据库</a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                
                                <a href="/history/list_published">已发布的历史</a>
                            </li>
                            <li>
                                
                                <a href="/workflow/list_published">已发布的工作流</a>
                            </li>
                            <li>
                                
                                <a href="/visualization/list_published">Published Visualizations</a>
                            </li>
                            <li>
                                
                                <a href="/page/list_published">已发布的页面</a>
                            </li>
                </ul>
        </li>
    
    
    
    
        
        <li class=" dropdown" style="display: none;">
                <a class=" dropdown-toggle" data-toggle="dropdown">Lab<b class='caret'></b></a>
                <ul class="dropdown-menu">
                            <li>
                                
                                <a href="/requests">Sequencing Requests</a>
                            </li>
                            <li>
                                
                                <a href="/requests/find_samples_index">Find Samples</a>
                            </li>
                            <li>
                                
                                <a target="galaxy_main" href="http://main.g2.bx.psu.edu/u/rkchak/p/sts">帮助</a>
                            </li>
                </ul>
        </li>
    


                                    
    
    
        
        <li class=" dropdown" style="">
                <a class=" dropdown-toggle" data-toggle="dropdown" target="_parent" href="javascript:frame_manager.frame_new({title: 'Trackster', type: 'url', content: '/visualization/list'});">Visualization<b class='caret'></b></a>
                <ul class="dropdown-menu">
                            <li>
                                
                                <a href="javascript:frame_manager.frame_new({title: 'Trackster', type: 'url', content: '/visualization/trackster'});">New Track Browser</a>
                            </li>
                            <li>
                                
                                <a href="javascript:frame_manager.frame_new({ type: 'url', content : '/visualization/list'});">Saved Visualizations</a>
                            </li>
                </ul>
        </li>
    

        
    
        
        <li class=" dropdown" style="">
                <a class=" dropdown-toggle" data-toggle="dropdown" target="_parent" href="/cloudlaunch">Cloud<b class='caret'></b></a>
                <ul class="dropdown-menu">
                            <li>
                                
                                <a href="/cloudlaunch">New Cloud Cluster</a>
                            </li>
                </ul>
        </li>
    

    
    
        
        <li class=" admin-only" style="display: none;">
                <a class="" data-toggle="dropdown" target="_parent" href="/admin">Admin</a>
        </li>
    
    
    
    
        
        <li class=" dropdown" style="">
                <a class=" dropdown-toggle" data-toggle="dropdown">帮助<b class='caret'></b></a>
                <ul class="dropdown-menu">
                            <li>
                                
                                <a target="_blank" href="http://wiki.g2.bx.psu.edu/Support">技术支持</a>
                            </li>
                            <li>
                                
                                <a target="_blank" href="http://wiki.g2.bx.psu.edu/Tool%20Shed">Tool shed wiki</a>
                            </li>
                            <li>
                                
                                <a target="_blank" href="http://wiki.g2.bx.psu.edu/">Galaxy wiki</a>
                            </li>
                            <li>
                                
                                <a target="_blank" href="http://galaxycast.org">视频教程（动画演示）</a>
                            </li>
                            <li>
                                
                                <a target="_blank" href="http://wiki.g2.bx.psu.edu/Citing%20Galaxy">如何引用Galaxy</a>
                            </li>
                            <li>
                                
                                <a target="_blank" href="/static/terms.html">Terms and Conditions</a>
                            </li>
                </ul>
        </li>
    
    
    
    
        
        <li class=" dropdown" style="display: none;">
                <a class=" dropdown-toggle" data-toggle="dropdown">账号<b class='caret'></b></a>
                <ul class="dropdown-menu">
                            <li>
                                
                                <a target="galaxy_main" href="/user/login">登录</a>
                            </li>
                            <li>
                                
                                <a target="galaxy_main" href="/user/create?cntrller=user">注册</a>
                            </li>
                </ul>
        </li>
    
    
        
        <li class=" dropdown" style="">
                <a class=" dropdown-toggle" data-toggle="dropdown">User<b class='caret'></b></a>
                <ul class="dropdown-menu">
                            <li>
                                <a>Logged in as <span id="user-email">xfyin@sibs.ac.cn</span></a>
                            </li>
                            <li>
                                
                                <a target="galaxy_main" href="/user?cntrller=user">Preferences</a>
                            </li>
                            <li>
                                
                                <a target="galaxy_main" href="/user/dbkeys">Custom Builds</a>
                            </li>
                            <li>
                                
                                <a target="_top" href="/user/logout">Logout</a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                
                                <a target="galaxy_main" href="/history/list">已保存的历史</a>
                            </li>
                            <li>
                                
                                <a target="galaxy_main" href="/dataset/list">Saved Datasets</a>
                            </li>
                            <li>
                                
                                <a target="_top" href="/page/list">Saved Pages</a>
                            </li>
                            <li>
                                
                                <a target="galaxy_main" href="/user/api_keys?cntrller=user">API Keys</a>
                            </li>
                </ul>
        </li>
    
    
    </ul>

    </div>
    </div>
    
    <div class="title">
        <a href="/">
        <img border="0" src="/static/images/galaxyIcon_noText.png">
        Galaxy
        </a>
    </div>

    <div class="quota-meter-container"></div>


                </div>
            </div>
            <div id="messagebox" class="panel-info-message">
            </div>
            
    
    

    

    <div id="overlay" style='display: none;'>

        <div id="overlay-background" class="modal-backdrop fade "></div>

        <div id="dialog-box" class="modal dialog-box" border="0" style='display: none;'>
                <div class="modal-header">
                    <span><h3 class='title'></h3></span>
                </div>
                <div class="modal-body"></div>
                <div class="modal-footer">
                    <div class="buttons" style="float: right;"></div>
                    <div class="extra_buttons" style=""></div>
                    <div style="clear: both;"></div>
                </div>
        </div>
    
    </div>

            <div id="center">
                
    
    
    
    
    

    
    <div class="unified-panel-header" unselectable="on">
        <div class="unified-panel-header-inner">
                    <a href="/page/list_published">Published Pages</a> | 
                    <a href="/page/list_published?f-username=aun1">aun1</a>
            | 
    Galaxy 101: The first thing you need to try
            
            <div style="float: right">
                

            </div>
        </div>
    </div>
    
    <div class="unified-panel-body">
        <div style="overflow: auto; height: 100%;">        
            <div class="page-body">
                <div>
                    

                </div>
                
                
    <h1>Galaxy 101: The first thing you should try</h1><p>In this very simple example we will introduce you to bare basics of Galaxy:</p><ul><li>Getting data from UCSC</li><li>Performing simple data manipulation</li><li>Understanding Galaxy's History system</li><li>Creating and editing workflows</li><li>Applying workflows to your data</li></ul><p>You can watch a step-by-step explanation of this entire tutorial&#160;<a href="http://screencast.g2.bx.psu.edu/galaxy101/">here</a>.</p><h2><strong>What are we trying to do?</strong></h2><p>Suppose you get the following question: "Mom (or Dad) ... Which coding exon has the highest number of single nucleotide polymorphisms on chromosome 22?". &#160;You think to yourself "Wow! This is a simple question ... I know exactly where the data is (at UCSC) but how do I actually compute this?" The truth is, there is really no straightforward way of answering this question in a time frame comparable to the attention span of a 7-year-old. Well ... actually there is and it is called Galaxy. So let's try it...</p><h2><strong>0. Organizing your windows and setting up Galaxy account</strong></h2><h3>0.0. Getting your display sorted out</h3><p>To get the most of this tutorial open two browser windows. One you already have (it is this page). To open the other, right click&#160;<a href="http://usegalaxy.org">this link</a>&#160;and&#160;choose "Open in a New Window" (or something similar depending on your operating system and browser):</p><p><img src="http://galaxy.psu.edu/galaxy101/newWindow.png" /></p><p>Then organize your windows as something like this (depending on the size of your monitor you may or may not be able to organize things this way, but you get the idea):</p><p><img src="http://galaxy.psu.edu/galaxy101/windows.png" /></p><h3>0.1. Setting up Galaxy account</h3><p>Go to the <strong>User </strong>link at the top of Galaxy interface and choose <strong>Register </strong>(unless of course you already have an account)<strong>:</strong></p><p><img src="http://galaxy.psu.edu/galaxy101/register.png" /></p><p>Then enter your information and you're in!</p><h2><strong>1. Getting data from UCSC</strong></h2><h3>1.0. Getting coding exons</h3><p>First thing we will do is to obtain data from UCSC by clicking "<em>Get Data -&gt; UCSC Main</em>":</p><p><img src="http://galaxy.psu.edu/galaxy101/getDataUCSC.png" /></p><p>You will see Galaxy's middle pane change to looks like this:</p><p><img src="http://galaxy.psu.edu/galaxy101/ucscGenes.png" /></p><p>Make sure that your settings are exactly the same as shown on the screen (in particular,&#160;<strong>position</strong> should be set to "chr22", <strong>output format</strong> should be set to "BED - browser extensible data", and "Galaxy" should be checked by&#160;<strong>Send output to</strong>&#160;option). Click <strong>get output </strong>and you will see the next screen:</p><p><img src="http://galaxy.psu.edu/galaxy101/ucscGenes2.png" /></p><p>here make sure <strong>Create one BED record per</strong>&#160;is set to "Coding Exons" and click <strong>Send Query to Galaxy</strong>. After this you will see your first History Item in Galaxy's right pane. It will go through gray (preparing) and yellow (running) states to become green:</p><p><img src="http://galaxy.psu.edu/galaxy101/firstHistoryItem.png" />&#160;</p><h3>1.1. Getting SNPs</h3><p>Now is the time to obtain SNP data. This is done almost exactly the same way.&#160;First thing we will do is to again click on "<em>Get Data -&gt; UCSC Main</em>":</p><p><img src="http://galaxy.psu.edu/galaxy101/getDataUCSC.png" /></p><p>but now change <strong>group</strong>&#160;to "Variation and Repeats":</p><p><img src="http://galaxy.psu.edu/galaxy101/varRep.png" /></p><p>so that the whole page looks like this:</p><p><img src="http://galaxy.psu.edu/galaxy101/ucscSNPs.png" /></p><p>click <strong>get output</strong>&#160;and you should see this:</p><p><img src="http://galaxy.psu.edu/galaxy101/ucscSNPs2.png" /></p><p>where you need to make sure that <strong>Whole Gene</strong>&#160;is selected ("Whole Gene" here really means "Whole Feature") and click <strong>Send Query to Galaxy</strong>. You will get your second item in the history:</p><p><img src="http://galaxy.psu.edu/galaxy101/secondHistoryItem.png" /></p><p>Now we will rename the two history items to "Exons" and "SNPs" by clicking on the Pencil icon adjacent to each item. Also we will rename history to "Galaxy 101" (or whatever you want) by clicking on "Unnamed history" so everything looks like this:</p><p><img src="http://galaxy.psu.edu/galaxy101/rename.png" /></p><h2>2. Finding Exons with the highest number of SNPs</h2><h3>2.0. Joining exons with SNPs</h3><p>Let's remind ourselves that our objective was to find which exon contains the most SNPs. This first step in answering this question will be joining exons with SNPs (a fancy word for printing exons and SNPs that overlap side by side). This is done using "<em>Operate on Genomics Intervals -&gt; Join</em><strong>"</strong>&#160;tool:</p><p><img src="http://galaxy.psu.edu/galaxy101/join.png" /></p><p>make sure your exons are first and SNPs are second and click <strong>Execute</strong>. You will get the third history item:</p><p><img src="http://galaxy.psu.edu/galaxy101/thirdHistoryItem.png" /></p><p>which will contain the following data:</p><pre>chr22 16258185 16258303 uc002zlh.1_cds_1_0_chr22_16258186_r 0 - chr22 16258278 16258279 rs2845178  0 +
chr22 16266928 16267095 uc002zlh.1_cds_2_0_chr22_16266929_r 0 - chr22 16267011 16267012 rs7290262  0 +
chr22 16266928 16267095 uc002zlh.1_cds_2_0_chr22_16266929_r 0 - chr22 16266963 16266964 rs10154680 0 +
chr22 16266928 16267095 uc002zlh.1_cds_2_0_chr22_16266929_r 0 - chr22 16267037 16267038 rs2818572  0 +
chr22 16266928 16267095 uc002zlh.1_cds_2_0_chr22_16266929_r 0 - chr22 16267031 16267032 rs7292200  0 +</pre><p>Let's take a look at this dataset. The first six columns correspond to exons. The last six correspond to SNPs. You can see that exon with ID uc002zlh.1_cds_2_0_chr22_16266929_r contains four SNPs with IDs&#160;rs7290262, rs10154680, rs2818572, and rs7292200.&#160;</p><h3>2.1. Counting the number of SNPs per exon</h3><p>Above we've seen that exon&#160;uc002zlh.1_cds_2_0_chr22_16266929_r&#160;is repeated four times in the above dataset. Thus we can easily compute the number of SNPs per exon by simply counting the number of repetitions of name for each exon. This can be easily done with the "<em>Join, Subtract, and Group -&gt; Group</em>" tool:</p><p><img src="http://galaxy.psu.edu/galaxy101/group1.png" /></p><p>choose column 4 by selecting "c4" in <strong>Group by column</strong>. Then click on <strong>Add new Operation</strong>&#160;and make sure the interface looks exactly as shown below:</p><p><img src="http://galaxy.psu.edu/galaxy101/group2.png" /></p><p>click <strong>Execute</strong>. Your history will look like this:</p><p><img src="http://galaxy.psu.edu/galaxy101/fourthHistoryItem.png" /></p><p>if you look at the above image you will see that the result of grouping (dataset #4) contains two columns. This first contains the exon name while the second shows the number of times this name has been repeated in dataset #3.&#160;</p><h3>2.3. Sorting exons by SNP count</h3><p>To see which exon has the highest number of SNPs we can simply sort the dataset #4 on the second column in descending order. This is done with "<em>Filter and Sort -&gt; Sort</em>":</p><p><img src="http://galaxy.psu.edu/galaxy101/sort.png" /></p><p>This will generate the fifth history item:</p><p><img src="http://galaxy.psu.edu/galaxy101/fifthHistoryItem.png" /></p><p>and you can now see that the highest number of SNPs per exon is 67.&#160;</p><h3>2.4. Selecting top five</h3><p>Now let's select top five exons with the highest number of SNPs. For this we will use "<em>Text Manipulation -&gt; Select First</em>" tool:</p><p><img src="http://galaxy.psu.edu/galaxy101/selectFirst.png" /></p><p>Clicking <strong>Execute</strong>&#160;will produce the sixth history item that will contain just five lines:</p><p><img src="http://galaxy.psu.edu/galaxy101/sixthHistoryItem.png" /></p><h3>2.5. Recovering exon info and displaying data in genome browsers</h3><p>Now we know that in this dataset the five top exons contain between 41 and 67 SNPs. But what else can we learn about these? To know more we need to get back the positional information (coordinates) of these exons. This information was lost at the grouping step and now all we have is just two columns. To get coordinates back we will match the names of exons in dataset #6 (column 1) against names of the exons in the original dataset #1 (column 4). This can be done with "<em>Join, Subtract and Group -&gt; Compare two Queries</em>" tool (note the settings of the tool in the middle pane):</p><p><img src="http://galaxy.psu.edu/galaxy101/compare.png" /></p><p>this adds the seventh dataset to the history:</p><p><img src="http://galaxy.psu.edu/galaxy101/seventhHistoryItem.png" /></p><p>The best way to learn about these exons is to look at their genomic surrounding. There is really no better way to do this than using genome browsers. Because this analysis was performed on "standard" human genome, you have two choices - UCSC Genome Browser and Ensembl:</p><p><img src="http://galaxy.psu.edu/galaxy101/browsers.png" /></p><p>For example, clicking on "display at UCSC main" will show this (to see your regions look at "User Track" on top of browser image):</p><p><img src="http://galaxy.psu.edu/galaxy101/ucsc.png" /></p><h2>3. Understanding histories</h2><p>In Galaxy your analyses live in histories such as this one:</p><p><img src="http://galaxy.psu.edu/galaxy101/seventhHistoryItem.png" /></p><p>Histories can be very large, you can have as many histories as you want, and all history behavior is controlled by the&#160;<strong>Options</strong>&#160;button on the top of the History pane:</p><p><img src="http://galaxy.psu.edu/galaxy101/historyOptions.png" /></p><p>Many of the options here are self explanatory. If you create a new history, your current history does not disappear. If you would like to list all of your histories just choose&#160;<strong>Saved Histories</strong>&#160;and you will see a list of all your histories in the center pane:</p><p><img src="http://galaxy.psu.edu/galaxy101/historyList.png" />&#160;</p><h2>4. Converting histories into workflows</h2><p>One of the history options listed above is very special. It allows you to easily convert existing histories into analysis workflows. Why would you want to create a workflows out of a history? To redo the analysis again with minimal clicking.&#160;</p><h3>4.0. Extracting workfklow</h3><p>Lets take a look at the history again:</p><p><img src="http://galaxy.psu.edu/galaxy101/seventhHistoryItem.png" /></p><p>You can see that this history contains all steps of our analysis. So by building this history we have actually built a complete record of our analysis with Galaxy preserving all parameter settings applied at every step. Wouldn't it be nice to just convert this history into a workflow that we'll be able to execute again and again? This can be done by clicking on <strong>Options </strong>button:</p><p><img src="http://galaxy.psu.edu/galaxy101/options.png" /></p><p>and selecting <strong>Extract Workflow</strong>&#160;option:</p><p><img src="http://galaxy.psu.edu/galaxy101/extractWorkflow.png" /></p><p>The center pane will change as shown below and you will be able to choose which steps to include/exclude and how to name the newly created workflow. In this case I named it "galaxy101":</p><p><img src="http://galaxy.psu.edu/galaxy101/createWorkflow.png" /></p><p>once you click <strong>Create Workflow</strong>&#160;you will get the following message: "Workflow 'galaxy101' created from current history". But where did it go? Click on <strong>Workflow</strong>&#160;link at the top of Galaxy interface and&#160;you will a list of all workflows with "galaxy101" listed at the top:</p><p><img src="http://galaxy.psu.edu/galaxy101/workflowList.png" /></p><h3>4.1. Opening workflow editor</h3><p>If you click on a triangle adjacent to the workflow's name you will see the following dialogue:</p><p><img src="http://galaxy.psu.edu/galaxy101/workflowDropdown.png" /></p><p>Click <strong>Edit</strong>&#160;and the workflow editor will launch. It will allow you to examine and change settings of this workflow as shown below. Note that the box corresponding to the "<em>Select First</em>" tool is selected (highlighted with the blue border) and you can see parameters of this tool on the right pane. This is how you can view and change parameters of all tools involved in the workflow.</p><p><img src="http://galaxy.psu.edu/galaxy101/wfEditor.png" /></p><h3>4.2. Hiding intermediate steps</h3><p>Among multiple things you can do with workflows I will just mention one. When workflow is executed one is usually interested in the final product and not in the intermediate steps. These steps can be hidden by mousing over a small asterisk in the lower right corner of every tool box:</p><p><img src="http://galaxy.psu.edu/galaxy101/hideStep.png" /></p><p>Yet there is a catch. In a newly created workflow all steps are hidden by default and default behavior of Galaxy is that if all steps of a given workflow are hidden, then nothing gets hidden in the history. This may be counterintuitive, but this is done to decrease the amount of clicking if you do want to hide some steps. So in our case if we want to hide all intermediate steps with the exception of the last one we will click that asterisk in last step of the workflow:</p><p><img src="http://galaxy.psu.edu/galaxy101/lastStep.png" /></p><p>Once you do this the representation of the workflow in the bottom right corner of the editor will change with the last step becoming orange. This means that this is the only step, which will generate a dataset visible in the history:</p><p><img src="http://galaxy.psu.edu/galaxy101/workflowOverview.png" /></p><h3>4.3. Renaming inputs</h3><p>Right now both inputs to the workflow look exactly the same. This is a problem as will be very confusing which input should be exons and which should be SNPs:</p><p><img src="http://galaxy.psu.edu/galaxy101/namingInputs1.png" /></p><p>One the image above you will see that the top input dataset (the one with the blue border) connects to the <em>Join</em> tool first, so it must correspond to the exon data. If you click on this box (in the image above it is already clicked on because it is outlined with the blue border) you will be able to rename the dataset in the right pane:</p><p><img src="http://galaxy.psu.edu/galaxy101/renameExons.png" /></p><p>Then click on the second input dataset and rename it "Features" (this would make this workflow a bit more generic, which will be useful later in this tutorial):</p><p><img src="http://galaxy.psu.edu/galaxy101/renameFeatures.png" /></p><h3>4.4. Renaming outputs</h3><p>Finally let's rename the workflow's output. For this click on the last dataset ("<em>Compare two Queries</em>") and in the <strong>Edit Step Actions</strong>&#160;dialogue box select "Rename Dataset"</p><p><img src="http://galaxy.psu.edu/galaxy101/renameOutput1.png" /></p><p>Click <strong>Create:</strong></p><p><strong><img src="http://galaxy.psu.edu/galaxy101/renameOutput2.png" /></strong></p><p>and call it something like "top 5 exons":</p><p><img src="http://galaxy.psu.edu/galaxy101/top5.png" /></p><h3>4.5. Save! It is important...</h3><p>Now let's save the changes we've made by clicking <strong>Options </strong>(top of the center pane) and selecting <strong>Save:</strong></p><p><strong><img src="http://galaxy.psu.edu/galaxy101/wfSave.png" /></strong></p><h2><br />5. Run workflow on whole genome data</h2><p>Now that we have a workflow, let's do something grand like, for example, finding exons with the highest number of repetitive elements.</p><p><strong>5.0. Create a new history</strong></p><p>Before we start let's create a new history by clicking <strong>Options</strong>&#160;and selecting <strong>Create New</strong>:</p><p><img src="http://galaxy.psu.edu/galaxy101/createNewHistory.png" /></p><h3>5.1. Get Exons</h3><p>Now let's get coding exons for the entire genome by going to "<em>Get Data -&gt; UCSC Main</em>" and setting up parameters as shown below. Note that this time <strong>region</strong>&#160;radio button is set to "genome":</p><p><img src="http://galaxy.psu.edu/galaxy101/getAllGenes.png" /></p><p>Click <strong>get output</strong>&#160;and you will get the next page (if it looks different from the image below, go back and make sure <strong>output format</strong>&#160;is set to "BED - browser extensible format"):</p><p><img src="http://galaxy.psu.edu/galaxy101/ucscGenes2.png" /></p><p>Choose "Coding exons" and click <strong>Send query to Galaxy</strong>.</p><h3>5.2. Get Repeats</h3><p>Go again to "<em>Get Data -&gt; UCSC Main</em>" and make sure the following settings are selected (in particular <strong>group </strong>= "Variation and Repeats" and <strong>track </strong>= "RepeatMasker"):</p><p><img src="http://galaxy.psu.edu/galaxy101/allRepeats.png" /></p><p>Click&#160;<strong>get output</strong>&#160;and you will get the next page (if it looks different from the image below, go back and make sure&#160;<strong>output format</strong>&#160;is set to "BED - browser extensible format"):</p><p><img src="http://galaxy.psu.edu/galaxy101/allRepeats2.png" /></p><p>Select "Whole gene" and click <strong>Send Query to Galaxy.</strong></p><h3>5.3. Start the Workflow</h3><p>At this point you will have two items in your history - one with exons and one with repeats. These datasets are very large (especially repeats) and it will take some time for them to become green. Luckily you do not have to wait as Galaxy will automatically start jobs once uploads have ended. So nothing stops us from starting the workflow we have created. First, click on the <strong>Workflow</strong>&#160;link at the top of Galaxy interface,&#160;mouse over "galaxy101", and click on the arrow:</p><p><img src="http://galaxy.psu.edu/galaxy101/workflowList.png" /></p><p>choose <strong>Run:</strong></p><p><img src="http://galaxy.psu.edu/galaxy101/workflowDropdown.png" /></p><p>Center pane will change to allow you launching the workflow. Select appropriate datasets for Repeats and Exon inputs as shown below, scroll down, and click <strong>Run workflow.</strong></p><p><img src="http://galaxy.psu.edu/galaxy101/launchWorkflow.png" /></p><p>Once workflow has started you will initially be able to see all its steps. Note that you are joining 77,614 exons with&#160;5,298,130&#160;repeats, so naturally this will take some time:</p><p><img src="http://galaxy.psu.edu/galaxy101/launchedWorkflow.png" /></p><h3>5.4. Get coffee</h3><p>As we mentioned above this will take some time, so go get coffee and then you will see this. Note that because all intermediate steps of the workflow were hidden, once it is finished you will only see the final dataset #7:</p><p><img src="http://galaxy.psu.edu/galaxy101/final.png" />htt</p><h2>6. We did not fake this:</h2><p>The two histories and the workflow described in this page are accessible directly from this page below. The histories are embedded below (click on the green plus icon to import):</p>

<div class='embedded-item display 
history'>
    <div class='title'>
        
    

    
    
    
    <div style="float: left">
        <a class="display_in_embed icon-button toggle-expand tooltip" item_id="6a2e1073bdfcd697" item_class="$item.__class__.__name__" href="/history/display_by_username_and_slug?username=aun1&slug=galaxy-101"
            title="Show history content"></a>
        <a class="toggle icon-button tooltip" href="/history/display_by_username_and_slug?username=aun1&slug=galaxy-101" title="Hide history content"></a>
    </div>
    <div style="float: right;">
        
    

    
    
    
    
    <a href="/history/imp?id=6a2e1073bdfcd697" title="Import history" class="icon-button import tooltip"></a>
    <a class="icon-button go-to-full-screen tooltip" href="/history/display_by_username_and_slug?username=aun1&slug=galaxy-101" title="Go to history"></a>

    </div>
    <h4><a class="toggle-embed tooltip" href="/history/display_by_username_and_slug?username=aun1&slug=galaxy-101" title="Show or hide history content">Galaxy 
History | 
    Galaxy 101</a></h4>
    
    <input type="hidden" name="ajax-item-content-url" value="/history/get_item_content_async?id=6a2e1073bdfcd697"/>

    </div>
    <div class='summary-content'>
        


    </div>
    <div class='expanded-content'>
        <hr/>
        <div class='item-content'></div>
    </div>
</div>








<div class='embedded-item display 
history'>
    <div class='title'>
        
    

    
    
    
    <div style="float: left">
        <a class="display_in_embed icon-button toggle-expand tooltip" item_id="c1287a8c8ec5e9cc" item_class="$item.__class__.__name__" href="/history/display_by_username_and_slug?username=aun1&slug=exons-vs-repeats"
            title="Show history content"></a>
        <a class="toggle icon-button tooltip" href="/history/display_by_username_and_slug?username=aun1&slug=exons-vs-repeats" title="Hide history content"></a>
    </div>
    <div style="float: right;">
        
    

    
    
    
    
    <a href="/history/imp?id=c1287a8c8ec5e9cc" title="Import history" class="icon-button import tooltip"></a>
    <a class="icon-button go-to-full-screen tooltip" href="/history/display_by_username_and_slug?username=aun1&slug=exons-vs-repeats" title="Go to history"></a>

    </div>
    <h4><a class="toggle-embed tooltip" href="/history/display_by_username_and_slug?username=aun1&slug=exons-vs-repeats" title="Show or hide history content">Galaxy 
History | 
    Exons vs Repeats</a></h4>
    
    <input type="hidden" name="ajax-item-content-url" value="/history/get_item_content_async?id=c1287a8c8ec5e9cc"/>

    </div>
    <div class='summary-content'>
        


    </div>
    <div class='expanded-content'>
        <hr/>
        <div class='item-content'></div>
    </div>
</div>






<p>The workflow is embedded here&#160;(click on the green plus icon to import):</p>

<div class='embedded-item display 
workflow'>
    <div class='title'>
        
    

    
    
    
    <div style="float: left">
        <a class="display_in_embed icon-button toggle-expand tooltip" item_id="86beaa9c1d0aab70" item_class="$item.__class__.__name__" href="/workflow/display_by_username_and_slug?username=aun1&slug=galaxy101"
            title="Show workflow content"></a>
        <a class="toggle icon-button tooltip" href="/workflow/display_by_username_and_slug?username=aun1&slug=galaxy101" title="Hide workflow content"></a>
    </div>
    <div style="float: right;">
        
    

    
    
    
    
    <a href="/workflow/imp?id=86beaa9c1d0aab70" title="Import workflow" class="icon-button import tooltip"></a>
    <a class="icon-button go-to-full-screen tooltip" href="/workflow/display_by_username_and_slug?username=aun1&slug=galaxy101" title="Go to workflow"></a>

    </div>
    <h4><a class="toggle-embed tooltip" href="/workflow/display_by_username_and_slug?username=aun1&slug=galaxy101" title="Show or hide workflow content">Galaxy 
Workflow | 
    galaxy101</a></h4>
    
    <input type="hidden" name="ajax-item-content-url" value="/workflow/get_item_content_async?id=86beaa9c1d0aab70"/>

    </div>
    <div class='summary-content'>
        


    </div>
    <div class='expanded-content'>
        <hr/>
        <div class='item-content'></div>
    </div>
</div>






<h1>THE END!</h1>

            </div>
        

        </div>
    </div>


            </div>
                <div id="right">
                    

    
    
    


    <div class="unified-panel-header" unselectable="on">
        <div class="unified-panel-header-inner">
            About this 
Page
        </div>
    </div>
    
    <div class="unified-panel-body">
        <div style="overflow: auto; height: 100%;">
            <div style="padding: 10px;">
            
                <div style="float: right;"><img src="https://secure.gravatar.com/avatar/b9399bac36a64f0b790621e527615664?d=identicon"></div>
            
                <h4>Author</h4>
                
                <p>aun1</p>
                
                <h4>Related Pages</h4>
                <p>
                    <a href="/page/list_published">All published pages</a><br>
                    <a href="/page/list_published?f-username=aun1">Published pages by aun1</a>
                
                <h4>Rating</h4>

                
                <div style="padding-bottom: 0.75em; float: left">
                    Community<br>
                    <span style="font-size:80%">
                        (<span id="num_ratings">37</span> ratings, 
                         <span id="ave_rating">4.8</span> average)
                    <span>
                </div>
                <div style="float: right">
                    <input name="star1" type="radio" class="community_rating_star star" disabled="disabled" value="1"
                    
                    />
                    <input name="star1" type="radio" class="community_rating_star star" disabled="disabled" value="2"
                    />
                    <input name="star1" type="radio" class="community_rating_star star" disabled="disabled" value="3"
                    />
                    <input name="star1" type="radio" class="community_rating_star star" disabled="disabled" value="4"
                    />
                    <input name="star1" type="radio" class="community_rating_star star" disabled="disabled" value="5"
                        checked="checked"
                    />
                </div>
                <div style="clear: both;"></div>
                    <div style="float: left">
                        Yours<br><span id="rating_feedback" style="font-size:80%; display: none">(thanks!)</span>
                    </div>
                    <div style="float: right">
                        <input name="star2" type="radio" class="user_rating_star" value="1"
                        />
                        <input name="star2" type="radio" class="user_rating_star" value="2"
                        />
                        <input name="star2" type="radio" class="user_rating_star" value="3"
                        />
                        <input name="star2" type="radio" class="user_rating_star" value="4"
                        />
                        <input name="star2" type="radio" class="user_rating_star" value="5"
                        />
                    </div>
                <div style="clear: both;"></div>
                        
                <h4>Tags</h4>
                <p>
                <div>
                    Community:
                    
    
    
    
    <div class="tag-element"
            id="447222508842875904"
    >
        <div class="tag-area 
        ">

                
                <span class="tag-button">
                    <span class="tag-name">tutorial</span>
                </span>
                
                <span class="tag-button">
                    <span class="tag-name">exons</span>
                </span>
                
                <span class="tag-button">
                    <span class="tag-name">snps</span>
                </span>
            
        </div>
    </div>

    
    <script type="text/javascript">
        init_tag_click_function($('#447222508842875904'), community_tag_click);
    </script>

                </div>
                    <p>
                    <div>
                        Yours:
                        
    
    
    
    
    <div class="tag-element"
            id="1059191054057867264"
    >
        <div class="tag-area 
                individual-tag-area
        ">

            
                    <input class="tag-input" type='text' size='15'/>
                    <img src='/static/images/fugue/tag--plus.png' class="add-tag-button tooltip" title="Add tags"/>
        </div>
    </div>

    
    <script type="text/javascript">
        //
        // Set up autocomplete tagger.
        //

        //
        // Default function get text to display on the toggle link.
        //
        var default_get_toggle_link_text_fn = function(tags)
        {
            var text = "";
            var num_tags = obj_length(tags);
            if (num_tags != 0)
              {
                text = num_tags + (num_tags != 1 ? " Tags" : " Tag");
                /*
                // Show first N tags; hide the rest.
                var max_to_show = 1;
    
                // Build tag string.
                var tag_strs = new Array();
                var count = 0;
                for (tag_name in tags)
                  {
                    tag_value = tags[tag_name];
                    tag_strs[tag_strs.length] = build_tag_str(tag_name, tag_value);
                    if (++count == max_to_show)
                      break;
                  }
                tag_str = tag_strs.join(", ");
            
                // Finalize text.
                var num_tags_hiding = num_tags - max_to_show;
                text = "Tags: " + tag_str + 
                  (num_tags_hiding != 0 ? " and " + num_tags_hiding + " more" : "");
                */
              }
            else
              {
                // No tags.
                text = "Add tags";
              }
            return text;
        };
        
        // Default function to handle a tag click.
        var default_tag_click_fn = function(tag_name, tag_value) { };
        
        
        var options =
        {
            tags : {},
            editable : true,
            get_toggle_link_text_fn: default_get_toggle_link_text_fn,
            tag_click_fn: community_tag_click,
            ajax_autocomplete_tag_url: "/tag/tag_autocomplete_data?item_id=924b1a46d03eaf1e&item_class=Page",
            ajax_add_tag_url: "/tag/add_tag_async?item_id=924b1a46d03eaf1e&item_class=Page&context=view.mako",
            ajax_delete_tag_url: "/tag/remove_tag_async?item_id=924b1a46d03eaf1e&item_class=Page&context=view.mako",
            delete_tag_img: "/static/images/delete_tag_icon_gray.png",
            delete_tag_img_rollover: "/static/images/delete_tag_icon_white.png",
            use_toggle_link: false
         };
         
        $('#1059191054057867264').autocomplete_tagging(options);
    </script>
    
    <style>
    .tag-area {
        display: block;
    }
    </style>

    <noscript>
    <style>
    .tag-area {
        display: block;
    }
    </style>
    </noscript>

                    </div>
            </div>    
        </div>
    </div>


                    <div class="unified-panel-footer">
                        <div class="panel-collapse right"></span></div>
                        <div class="drag"></div>
                    </div>
                </div>
        </div>
    </body>
    

    <script src="/static/scripts/libs/jquery/jquery.event.drag.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/jquery/jquery.event.hover.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/jquery/jquery.form.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/libs/jquery/jquery.rating.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/galaxy.panels.js?v=1377279265" type="text/javascript"></script>
    <script type="text/javascript">
        
    ensure_dd_helper();
        
        
            var rp = new Panel( { panel: $("#right"), center: $("#center"), drag: $("#right > .unified-panel-footer > .drag" ), toggle: $("#right > .unified-panel-footer > .panel-collapse" ), right: true } );
            window.handle_minwidth_hint = function( x ) { rp.handle_minwidth_hint( x ) };
            force_right_panel = function( x ) { rp.force_panel( x ) };
    
    </script>
    <![if !IE]>
    <script type="text/javascript">
        var upload_form_error = function( msg ) {
            if ( ! $("iframe#galaxy_main").contents().find("body").find("div[class='errormessage']").size() ) {
                $("iframe#galaxy_main").contents().find("body").prepend( '<div class="errormessage" name="upload_error">' + msg + '</div><p/>' );
            } else {
                $("iframe#galaxy_main").contents().find("body").find("div[class='errormessage']").text( msg );
            }
        }
        var uploads_in_progress = 0;
        jQuery( function() {
            $("iframe#galaxy_main").load( function() {
                $(this).contents().find("form").each( function() { 
                    if ( $(this).find("input[galaxy-ajax-upload]").length > 0 ){
                        $(this).submit( function() {
                            // Only bother using a hidden iframe if there's a file (e.g. big data) upload
                            var file_upload = false;
                            $(this).find("input[galaxy-ajax-upload]").each( function() {
                                if ( $(this).val() != '' ) {
                                    file_upload = true;
                                }
                            });
                            if ( ! file_upload ) {
                                return true;
                            }
                            // Make a synchronous request to create the datasets first
                            var async_datasets;
                            var upload_error = false;
                            $.ajax( {
                                async:      false,
                                type:       "POST",
                                url:        "/tool_runner/upload_async_create",
                                data:       $(this).formSerialize(),
                                dataType:   "json",
                                success:    function(array_obj, status) {
                                                if (array_obj.length > 0) {
                                                    if (array_obj[0] == 'error') {
                                                        upload_error = true;
                                                        upload_form_error(array_obj[1]);
                                                    } else {
                                                        async_datasets = array_obj.join();
                                                    }
                                                } else {
                                                    // ( gvk 1/22/10 ) FIXME: this block is never entered, so there may be a bug somewhere
                                                    // I've done some debugging like checking to see if array_obj is undefined, but have not
                                                    // tracked down the behavior that will result in this block being entered.  I believe the
                                                    // intent was to have this block entered if the upload button is clicked on the upload
                                                    // form but no file was selected.
                                                    upload_error = true;
                                                    upload_form_error( 'No data was entered in the upload form.  You may choose to upload a file, paste some data directly in the data box, or enter URL(s) to fetch data.' );
                                                }
                                            }
                            } );
                            if (upload_error == true) {
                                return false;
                            } else {
                                $(this).find("input[name=async_datasets]").val( async_datasets );
                                $(this).append("<input type='hidden' name='ajax_upload' value='true'>");
                            }
                            // iframe submit is required for nginx (otherwise the encoding is wrong)
                            $(this).ajaxSubmit( { iframe:   true,
                                                  complete: function (xhr, stat) {
                                                                uploads_in_progress--;
                                                                if (uploads_in_progress == 0) {
                                                                    window.onbeforeunload = null;
                                                                }
                                                            }
                                                 } );
                            uploads_in_progress++;
                            window.onbeforeunload = function() { return "Navigating away from the Galaxy analysis interface will interrupt the file upload(s) currently in progress.  Do you really want to do this?"; }
                            if ( $(this).find("input[name='folder_id']").val() != undefined ) {
                                var library_id = $(this).find("input[name='library_id']").val();
                                var show_deleted = $(this).find("input[name='show_deleted']").val();
                                if ( location.pathname.indexOf( 'admin' ) != -1 ) {
                                    $("iframe#galaxy_main").attr("src","/library_common/browse_library?cntrller=library_admin&id=" + library_id + "&created_ldda_ids=" + async_datasets + "&show_deleted=" + show_deleted);
                                } else {
                                    $("iframe#galaxy_main").attr("src","/library_common/browse_library?cntrller=library&id=" + library_id + "&created_ldda_ids=" + async_datasets + "&show_deleted=" + show_deleted);
                                }
                            } else {
                                $("iframe#galaxy_main").attr("src","/tool_runner/upload_async_message");
                            }
                            return false;
                        });
                    }
                });
            });
        });
    </script>
    <![endif]>


<!-- quota meter -->
<script src="/static/scripts/templates/compiled/helpers-common-templates.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/templates/compiled/template-user-quotaMeter-quota.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/templates/compiled/template-user-quotaMeter-usage.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/mvc/base-mvc.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/mvc/user/user-model.js?v=1377279265" type="text/javascript"></script>
<script src="/static/scripts/mvc/user/user-quotameter.js?v=1377279265" type="text/javascript"></script>
<script type="text/javascript">

    // start a Galaxy namespace for objects created
    window.Galaxy = window.Galaxy || {};

    // set up the quota meter (And fetch the current user data from trans)
    Galaxy.currUser = new User( 

{"username": "yixf", "quota_percent": 2, "total_disk_usage": 6568479157.0, "nice_total_disk_usage": "6.1 GB", "email": "xfyin@sibs.ac.cn", "model_class": "User", "id": "354d674eb534dccc"}
 );
    Galaxy.quotaMeter = new UserQuotaMeter({
        model   : Galaxy.currUser,
        el      : $( document ).find( '.quota-meter-container' )
    }).render();

</script>

</html>
